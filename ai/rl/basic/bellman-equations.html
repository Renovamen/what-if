<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>贝尔曼方程 | What if?</title>
    <meta name="generator" content="VuePress 1.8.2">
    <link rel="icon" href="/favicon.svg">
    <meta name="description" content="Renovamen's messy notebook.">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/assets/css/0.styles.09850c6c.css" as="style"><link rel="preload" href="/assets/js/app.b00c0d9a.js" as="script"><link rel="preload" href="/assets/js/4.609d7940.js" as="script"><link rel="preload" href="/assets/js/1.afad3575.js" as="script"><link rel="preload" href="/assets/js/2.c3e2e749.js" as="script"><link rel="preload" href="/assets/js/7.116d18a7.js" as="script"><link rel="prefetch" href="/assets/js/10.49f9fa2c.js"><link rel="prefetch" href="/assets/js/11.90dce0e4.js"><link rel="prefetch" href="/assets/js/12.ea4dedad.js"><link rel="prefetch" href="/assets/js/13.7acbcbcc.js"><link rel="prefetch" href="/assets/js/14.1d1264f5.js"><link rel="prefetch" href="/assets/js/15.35919b57.js"><link rel="prefetch" href="/assets/js/16.33c66b4e.js"><link rel="prefetch" href="/assets/js/17.36177836.js"><link rel="prefetch" href="/assets/js/18.9c3fef97.js"><link rel="prefetch" href="/assets/js/19.22ce0014.js"><link rel="prefetch" href="/assets/js/20.73fc0026.js"><link rel="prefetch" href="/assets/js/21.c6c03ede.js"><link rel="prefetch" href="/assets/js/22.a1e08aa7.js"><link rel="prefetch" href="/assets/js/23.b5955d5e.js"><link rel="prefetch" href="/assets/js/24.6d6c6c5b.js"><link rel="prefetch" href="/assets/js/25.b27eb637.js"><link rel="prefetch" href="/assets/js/26.77268c50.js"><link rel="prefetch" href="/assets/js/27.728227bc.js"><link rel="prefetch" href="/assets/js/28.f1888700.js"><link rel="prefetch" href="/assets/js/29.9bef2d85.js"><link rel="prefetch" href="/assets/js/30.e68bfddd.js"><link rel="prefetch" href="/assets/js/31.6e703c21.js"><link rel="prefetch" href="/assets/js/32.9add56e0.js"><link rel="prefetch" href="/assets/js/33.c22f4d49.js"><link rel="prefetch" href="/assets/js/34.3d3dda39.js"><link rel="prefetch" href="/assets/js/35.25bb29e7.js"><link rel="prefetch" href="/assets/js/36.07e86e18.js"><link rel="prefetch" href="/assets/js/37.a7d4df0e.js"><link rel="prefetch" href="/assets/js/38.6502dce3.js"><link rel="prefetch" href="/assets/js/39.48a9cb5a.js"><link rel="prefetch" href="/assets/js/40.c7b525f7.js"><link rel="prefetch" href="/assets/js/41.28deb4db.js"><link rel="prefetch" href="/assets/js/42.d3c3f1ef.js"><link rel="prefetch" href="/assets/js/43.03011881.js"><link rel="prefetch" href="/assets/js/44.883896c4.js"><link rel="prefetch" href="/assets/js/45.96f2a1b1.js"><link rel="prefetch" href="/assets/js/46.e038935f.js"><link rel="prefetch" href="/assets/js/47.be2bd34b.js"><link rel="prefetch" href="/assets/js/48.f2c171d6.js"><link rel="prefetch" href="/assets/js/49.52bfadab.js"><link rel="prefetch" href="/assets/js/5.f579fd38.js"><link rel="prefetch" href="/assets/js/50.6b8326f4.js"><link rel="prefetch" href="/assets/js/51.d1f1b08b.js"><link rel="prefetch" href="/assets/js/52.c3e6dd72.js"><link rel="prefetch" href="/assets/js/53.ca461e50.js"><link rel="prefetch" href="/assets/js/54.14b7c910.js"><link rel="prefetch" href="/assets/js/55.a24de69d.js"><link rel="prefetch" href="/assets/js/56.eb540518.js"><link rel="prefetch" href="/assets/js/57.7704b8da.js"><link rel="prefetch" href="/assets/js/58.00d71cdf.js"><link rel="prefetch" href="/assets/js/59.1a18940c.js"><link rel="prefetch" href="/assets/js/6.14faf0f4.js"><link rel="prefetch" href="/assets/js/60.7ba3282e.js"><link rel="prefetch" href="/assets/js/61.5fd0e372.js"><link rel="prefetch" href="/assets/js/62.ecf6d218.js"><link rel="prefetch" href="/assets/js/63.d113238d.js"><link rel="prefetch" href="/assets/js/64.51d149ed.js"><link rel="prefetch" href="/assets/js/65.9c24eace.js"><link rel="prefetch" href="/assets/js/66.4436324d.js"><link rel="prefetch" href="/assets/js/67.66da6a68.js"><link rel="prefetch" href="/assets/js/68.9220ddb1.js"><link rel="prefetch" href="/assets/js/69.dcc1439e.js"><link rel="prefetch" href="/assets/js/70.f7dbceec.js"><link rel="prefetch" href="/assets/js/71.bc114d4d.js"><link rel="prefetch" href="/assets/js/72.e670e873.js"><link rel="prefetch" href="/assets/js/73.12789d49.js"><link rel="prefetch" href="/assets/js/74.6628b01a.js"><link rel="prefetch" href="/assets/js/75.7d562bdb.js"><link rel="prefetch" href="/assets/js/76.3f5c43d2.js"><link rel="prefetch" href="/assets/js/77.c545bea8.js"><link rel="prefetch" href="/assets/js/78.c33d3458.js"><link rel="prefetch" href="/assets/js/79.346e9e34.js"><link rel="prefetch" href="/assets/js/8.5689ede7.js"><link rel="prefetch" href="/assets/js/80.4b2cdcca.js"><link rel="prefetch" href="/assets/js/81.395086c6.js"><link rel="prefetch" href="/assets/js/82.e66fb79d.js"><link rel="prefetch" href="/assets/js/9.6d2a0785.js">
    <link rel="stylesheet" href="/assets/css/0.styles.09850c6c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="0 0 24 24" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></svg></div> <a href="/" class="home-link router-link-active"><img src="/favicon.svg" alt="What if?" class="logo"> <span class="site-name can-hide">What if?</span></a> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Stupid AI" class="dropdown-title"><span class="title">Stupid AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="Stupid AI" class="mobile-dropdown-title"><span class="title">Stupid AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ai/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/dl/" class="nav-link">
  Deep Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/rl/" class="nav-link router-link-active">
  Reinforcement Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/nlp/" class="nav-link">
  Statistical NLP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Math" class="dropdown-title"><span class="title">Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="Math" class="mobile-dropdown-title"><span class="title">Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/math/linear-algebra/" class="nav-link">
  Linear Algebra
</a></li><li class="dropdown-item"><!----> <a href="/math/information-theory/" class="nav-link">
  Information Theory
</a></li></ul></div></div><div class="nav-item"><a href="/papers/" class="nav-link">
  Papers
</a></div><div class="nav-item"><a href="/snippets/" class="nav-link">
  Snippets
</a></div></nav> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-buttons can-hide"><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></a> <a rel="noopener noreferrer" target="_blank" href="https://zxh.io"><svg aria-hidden="true" width="20.16" height="20.16" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.26em;"><path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 000-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 00256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg></a> <a rel="noopener noreferrer" target="_blank" href="https://github.com/Renovamen/what-if"><svg aria-hidden="true" width="23.04" height="23.04" viewBox="-51.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.44em;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Stupid AI" class="dropdown-title"><span class="title">Stupid AI</span> <span class="arrow down"></span></button> <button type="button" aria-label="Stupid AI" class="mobile-dropdown-title"><span class="title">Stupid AI</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/ai/ml/" class="nav-link">
  Machine Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/dl/" class="nav-link">
  Deep Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/rl/" class="nav-link router-link-active">
  Reinforcement Learning
</a></li><li class="dropdown-item"><!----> <a href="/ai/nlp/" class="nav-link">
  Statistical NLP
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Math" class="dropdown-title"><span class="title">Math</span> <span class="arrow down"></span></button> <button type="button" aria-label="Math" class="mobile-dropdown-title"><span class="title">Math</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/math/linear-algebra/" class="nav-link">
  Linear Algebra
</a></li><li class="dropdown-item"><!----> <a href="/math/information-theory/" class="nav-link">
  Information Theory
</a></li></ul></div></div><div class="nav-item"><a href="/papers/" class="nav-link">
  Papers
</a></div><div class="nav-item"><a href="/snippets/" class="nav-link">
  Snippets
</a></div></nav>  <ul class="sidebar-links"><li class="sidebar-header"><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li class="sidebar-header"><a href="/ai/rl/basic/key-concepts.html" class="sidebar-link">基本概念</a></li><li class="sidebar-header"><a href="/ai/rl/basic/mdp.html" class="sidebar-link">马尔科夫决策过程</a></li><li class="sidebar-header"><a href="/ai/rl/basic/bellman-equations.html" aria-current="page" class="active sidebar-link">贝尔曼方程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/ai/rl/basic/bellman-equations.html#动作值函数的贝尔曼方程" class="sidebar-link">动作值函数的贝尔曼方程</a></li><li class="sidebar-sub-header"><a href="/ai/rl/basic/bellman-equations.html#状态值函数的贝尔曼方程" class="sidebar-link">状态值函数的贝尔曼方程</a></li><li class="sidebar-sub-header"><a href="/ai/rl/basic/bellman-equations.html#另一种形式" class="sidebar-link">另一种形式</a></li><li class="sidebar-sub-header"><a href="/ai/rl/basic/bellman-equations.html#贝尔曼最优方程" class="sidebar-link">贝尔曼最优方程</a></li><li class="sidebar-sub-header"><a href="/ai/rl/basic/bellman-equations.html#总结" class="sidebar-link">总结</a></li></ul></li><li class="sidebar-header"><a href="/ai/rl/basic/dp.html" class="sidebar-link">基于模型的动态规划</a></li></ul></section></li><li class="sidebar-header"><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基于值函数的方法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li class="sidebar-header"><a href="/ai/rl/value-based/mc.html" class="sidebar-link">蒙特卡洛</a></li><li class="sidebar-header"><a href="/ai/rl/value-based/td.html" class="sidebar-link">时间差分</a></li></ul></section></li></ul>  <nav class="nav-buttons"><a role="button" aria-label="Toggle light" title="Toggle light" class="toggle-mode"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M224 96l16-32 32-16-32-16-16-32-16 32-32 16 32 16 16 32zM80 160l26.66-53.33L160 80l-53.34-26.67L80 0 53.34 53.33 0 80l53.34 26.67L80 160zm352 128l-26.66 53.33L352 368l53.34 26.67L432 448l26.66-53.33L512 368l-53.34-26.67L432 288zm70.62-193.77L417.77 9.38C411.53 3.12 403.34 0 395.15 0c-8.19 0-16.38 3.12-22.63 9.38L9.38 372.52c-12.5 12.5-12.5 32.76 0 45.25l84.85 84.85c6.25 6.25 14.44 9.37 22.62 9.37 8.19 0 16.38-3.12 22.63-9.37l363.14-363.15c12.5-12.48 12.5-32.75 0-45.24zM359.45 203.46l-50.91-50.91 86.6-86.6 50.91 50.91-86.6 86.6z"/></svg></a> <a rel="noopener noreferrer" target="_blank" href="https://zxh.io"><svg aria-hidden="true" width="20.16" height="20.16" viewBox="-75.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.26em;"><path d="M352 320c-22.608 0-43.387 7.819-59.79 20.895l-102.486-64.054a96.551 96.551 0 000-41.683l102.486-64.054C308.613 184.181 329.392 192 352 192c53.019 0 96-42.981 96-96S405.019 0 352 0s-96 42.981-96 96c0 7.158.79 14.13 2.276 20.841L155.79 180.895C139.387 167.819 118.608 160 96 160c-53.019 0-96 42.981-96 96s42.981 96 96 96c22.608 0 43.387-7.819 59.79-20.895l102.486 64.054A96.301 96.301 0 00256 416c0 53.019 42.981 96 96 96s96-42.981 96-96-42.981-96-96-96z"/></svg></a> <a rel="noopener noreferrer" target="_blank" href="https://github.com/Renovamen/what-if"><svg aria-hidden="true" width="23.04" height="23.04" viewBox="-51.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.44em;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></a></nav></aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="贝尔曼方程"><a href="#贝尔曼方程" class="header-anchor">#</a> 贝尔曼方程</h1> <p><strong>贝尔曼方程</strong>（Bellman Equation）把值函数分解为了当前奖励（immediate reward）+ 未来奖励的折扣总和（discounted sum of future rewards）。</p> <p>贝尔曼方程是一个递归的形式。</p> <h2 id="动作值函数的贝尔曼方程"><a href="#动作值函数的贝尔曼方程" class="header-anchor">#</a> 动作值函数的贝尔曼方程</h2> <div class="custom-block tip"><p class="custom-block-title">动作值函数的贝尔曼方程</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow><annotation encoding="application/x-tex">Q_{\pi}(s_t, a_t) = \mathbb{E}_{S_{t+1}, A_{t+1}} \Big [ R_t + \gamma \cdot Q_{\pi}(S_{t+1}, A_{t+1}) \mid S_t = s_t, A_t = a_t \Big ]
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.63889em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span></span></p></div> <details class="custom-block details"><summary>证明过程</summary> <p>易证：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>G</mi><mi>t</mi></msub><mo>=</mo><munder><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>0</mn></mrow></munder><msup><mi>γ</mi><mi>k</mi></msup><msub><mi>R</mi><mrow><mi>t</mi><mo>+</mo><mi>k</mi></mrow></msub><mo>=</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>G</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">G_t = \sum_{k=0} \gamma^k R_{t+k} = R_t + \gamma \cdot G_{t+1}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3521180000000004em;vertical-align:-1.3021129999999999em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.0500050000000005em;"><span style="top:-1.847887em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.050005em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.3021129999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8991079999999999em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.63889em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span></span></p> <p>那么有：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>a</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>⋯</mo></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>G</mi><mi>t</mi></msub><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>⋯</mo></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>G</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><mo>⋯</mo></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
  Q_{\pi}(s_t, a_t) &amp;= \mathbb{E}_{S_{t+1}, A_{t+1}, \cdots} \Big [ G_t \mid S_t = s_t, A_t = a_t \Big ] \\
    &amp;= \mathbb{E}_{S_{t+1}, A_{t+1}, \cdots} \Big [ R_t + \gamma \cdot G_{t+1} \mid S_t = s_t, A_t = a_t \Big ] \\
    &amp;= \mathbb{E}_{S_{t+1}, A_{t+1}, \cdots} \Big [ R_t + \gamma \cdot Q_{\pi}(S_{t+1}, A_{t+1}) \mid S_t = s_t, A_t = a_t \Big ]
\end{aligned}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:6.300059999999999em;vertical-align:-2.900029999999999em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.40003em;"><span style="top:-5.40003em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-3.3000100000000003em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"></span></span><span style="top:-1.1999900000000008em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.900029999999999em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:3.40003em;"><span style="top:-5.40003em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span><span style="top:-3.3000100000000003em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span><span style="top:-1.1999900000000008em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="minner mtight">⋯</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:2.900029999999999em;"><span></span></span></span></span></span></span></span></span></span></span></span></p> <p>最后一步是因为动作值函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_{\pi}(S_{t+1}, A_{t+1})</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span> 求的就是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>G</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">G_{t+1}</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.891661em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathnormal">G</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span> 的期望。</p></details> <h2 id="状态值函数的贝尔曼方程"><a href="#状态值函数的贝尔曼方程" class="header-anchor">#</a> 状态值函数的贝尔曼方程</h2> <div class="custom-block tip"><p class="custom-block-title">状态值函数的贝尔曼方程</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>s</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>A</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow><annotation encoding="application/x-tex">V_{\pi}(s_t) = \mathbb{E}_{A_t, S_{t+1}} \Big [ R_t + \gamma \cdot V_{\pi}(S_{t+1}) \mid S_t = s_t \Big ]
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.63889em;vertical-align:-0.19444em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.83333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span></span></p></div> <details class="custom-block details"><summary>证明过程</summary> <p>由<a href="/ai/rl/basic/key-concepts.html#状态值函数">状态值函数的定义</a>：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><msub><mi>A</mi><mi>t</mi></msub></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow><annotation encoding="application/x-tex">V_{\pi}(S_t) = \mathbb{E}_{A_t} \Big [ Q_{\pi}(S_t, A_t) \Big ]</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span> 得到：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo separator="true">,</mo><msub><mi>A</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo>=</mo><msub><mi>a</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
  Q_{\pi}(S_t, A_t) &amp;= \mathbb{E}_{S_{t+1}, A_{t+1}} \Big [ R_t + \gamma \cdot Q_{\pi}(S_{t+1}, A_{t+1}) \mid S_t = s_t, A_t = a_t \Big ] \\
    &amp;= \mathbb{E}_{S_{t+1}} \Big [ R_t + \gamma \cdot V_{\pi}(S_{t+1}) \mid S_t = s_t, A_t = a_t \Big ]
\end{aligned}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:4.2000399999999996em;vertical-align:-1.8500199999999998em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500199999999998em;"><span style="top:-4.35002em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500199999999998em;"><span style="top:-4.35002em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span></span></span></span></span></span></p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable rowspacing="0.2500em" columnalign="right left" columnspacing="0em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>t</mi></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><msub><mi>A</mi><mi>t</mi></msub></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>A</mi><mi>t</mi></msub><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mo>=</mo><msub><mi mathvariant="double-struck">E</mi><mrow><msub><mi>A</mi><mi>t</mi></msub><mo separator="true">,</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">[</mo><msub><mi>R</mi><mi>t</mi></msub><mo>+</mo><mi>γ</mi><mo>⋅</mo><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msub><mi>S</mi><mrow><mi>t</mi><mo>+</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo><mo>∣</mo><msub><mi>S</mi><mi>t</mi></msub><mo>=</mo><msub><mi>s</mi><mi>t</mi></msub><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">]</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}
  V_{\pi}(S_t) &amp;= \mathbb{E}_{A_t} \Big [ Q_{\pi}(S_t, A_t) \Big ] \\
    &amp;= \mathbb{E}_{A_t, S_{t+1}} \Big [ R_t + \gamma \cdot V_{\pi}(S_{t+1}) \mid S_t = s_t \Big ]
\end{aligned}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:4.2000399999999996em;vertical-align:-1.8500199999999998em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500199999999998em;"><span style="top:-4.35002em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.3500199999999998em;"><span style="top:-4.35002em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2501em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">]</span></span></span></span><span style="top:-2.25em;"><span class="pstrut" style="height:3.15em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathbb">E</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.328331em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.29634285714285713em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mpunct mtight">,</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173142857142857em;"><span style="top:-2.357em;margin-left:-0.05764em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.20252142857142857em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.291765em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">[</span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.00773em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">t</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.05764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.2805559999999999em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">t</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="delimsizing size2">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.8500199999999998em;"><span></span></span></span></span></span></span></span></span></span></span></span></p></details> <h2 id="另一种形式"><a href="#另一种形式" class="header-anchor">#</a> 另一种形式</h2> <p>贝尔曼方程可以表达为另一种形式。</p> <img src="data:image/png;base64,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" width="250px" alt="bellman equation 1"> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∣</mo><mi>s</mi><mo stretchy="false">)</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(1)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">V_{\pi}(s) = \sum_{a \in \mathcal{A}} \pi(a \mid s) Q_{\pi}(s, a) \tag{1}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">1</span></span><span class="mord">)</span></span></span></span></span></span></p> <hr> <img src="data:image/png;base64,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" width="250px" alt="bellman equation 2"> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(2)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">Q_{\pi}(s, a) = R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a V_{\pi}(s') \tag{2}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">2</span></span><span class="mord">)</span></span></span></span></span></span></p> <hr> <img src="data:image/png;base64,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" width="320px" alt="bellman equation 3"> <p>把式 (2) 代入式 (1)：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∣</mo><mi>s</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">(</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><msub><mi>V</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(3)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">V_{\pi}(s) = \sum_{a \in \mathcal{A}} \pi(a \mid s) \Big( R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a V_{\pi}(s') \Big) \tag{3}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">(</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.471706em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">)</span></span></span><span class="tag"><span class="strut" style="height:2.471706em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">3</span></span><span class="mord">)</span></span></span></span></span></span></p> <hr> <img src="data:image/png;base64,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" width="320px" alt="bellman equation 4"> <p>把式 (1) 代入式 (2)：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∣</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><msub><mi>Q</mi><mi>π</mi></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(4)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">Q_{\pi}(s, a) = R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a \sum_{a \in \mathcal{A}} \pi(a' \mid s') Q_{\pi}(s', a') \tag{4}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.03588em;">π</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">4</span></span><span class="mord">)</span></span></span></span></span></span></p> <hr> <p>式 (3) 和式 (4) 就是贝尔曼方程的另一种形式。</p> <h2 id="贝尔曼最优方程"><a href="#贝尔曼最优方程" class="header-anchor">#</a> 贝尔曼最优方程</h2> <p><a href="/ai/rl/basic/key-concepts.html#动作值函数">之前</a>定义了最优状态值函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>V</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_*(s)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span></span></span></span> 和最优动作值函数 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>Q</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_*(s, a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span>，如果只关注最优值：</p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>V</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∣</mo><mi>s</mi><mo stretchy="false">)</mo><msub><mi>Q</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">V_*(s) = \sum_{a \in \mathcal{A}} \pi(a \mid s) Q_*(s, a)
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span></span></p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><msub><mi>Q</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><msub><mi>V</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">Q_*(s, a) = R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a V_*(s')
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>V</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo stretchy="false">)</mo><mo>=</mo><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><mi>a</mi><mo>∣</mo><mi>s</mi><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">(</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><msub><mi>V</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><mo fence="false" stretchy="true" minsize="1.8em" maxsize="1.8em">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(5)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">V_*(s) = \sum_{a \in \mathcal{A}} \pi(a \mid s) \Big( R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a V_*(s') \Big) \tag{5}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.80002em;vertical-align:-0.65002em;"></span><span class="mord mathnormal">s</span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">(</span></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.471706em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.22222em;">V</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="delimsizing size2">)</span></span></span><span class="tag"><span class="strut" style="height:2.471706em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">5</span></span><span class="mord">)</span></span></span></span></span></span></p> <p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mtable width="100%"><mtr><mtd width="50%"></mtd><mtd><mrow><msub><mi>Q</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>=</mo><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo><mo>+</mo><mi>γ</mi><munder><mo>∑</mo><mrow><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∈</mo><mi mathvariant="script">S</mi></mrow></munder><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup><munder><mo>∑</mo><mrow><mi>a</mi><mo>∈</mo><mi mathvariant="script">A</mi></mrow></munder><mi>π</mi><mo stretchy="false">(</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo>∣</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo><msub><mi>Q</mi><mo>∗</mo></msub><mo stretchy="false">(</mo><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo separator="true">,</mo><msup><mi>a</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup><mo stretchy="false">)</mo></mrow></mtd><mtd width="50%"></mtd><mtd><mtext>(6)</mtext></mtd></mtr></mtable><annotation encoding="application/x-tex">Q_*(s, a) = R(s, a) + \gamma \sum_{s' \in \mathcal{S}} P_{ss'}^a \sum_{a \in \mathcal{A}} \pi(a' \mid s') Q_*(s', a') \tag{6}
</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord mathnormal" style="margin-right:0.05556em;">γ</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mrel mtight">∈</span><span class="mord mathcal mtight" style="margin-right:0.075em;">S</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.7143919999999999em;"><span style="top:-2.4530000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.050005em;"><span style="top:-1.8556639999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">a</span><span class="mrel mtight">∈</span><span class="mord mathcal mtight">A</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.321706em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal" style="margin-right:0.03588em;">π</span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">∣</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.051892em;vertical-align:-0.25em;"></span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span><span class="mord"><span class="mord mathnormal">Q</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.175696em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mbin mtight">∗</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.801892em;"><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span><span class="mclose">)</span></span><span class="tag"><span class="strut" style="height:2.3717110000000003em;vertical-align:-1.321706em;"></span><span class="mord text"><span class="mord">(</span><span class="mord"><span class="mord">6</span></span><span class="mord">)</span></span></span></span></span></span></p> <p>式 (5) 和式 (6) 就是<strong>贝尔曼最优方程</strong>（Bellman Optimality Equation）。</p> <h2 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h2> <p>贝尔曼方程是大多数强化学习算法的理论基础。</p> <p>可以看到，如果环境是已知的，即 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mo stretchy="false">(</mo><mi>s</mi><mo separator="true">,</mo><mi>a</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">R(s, a)</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.00773em;">R</span><span class="mopen">(</span><span class="mord mathnormal">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">a</span><span class="mclose">)</span></span></span></span> 和 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msubsup><mi>P</mi><mrow><mi>s</mi><msup><mi>s</mi><mo mathvariant="normal" lspace="0em" rspace="0em">′</mo></msup></mrow><mi>a</mi></msubsup></mrow><annotation encoding="application/x-tex">P_{ss'}^a</annotation></semantics></math></span><span aria-hidden="true" class="katex-html"><span class="base"><span class="strut" style="height:0.95831em;vertical-align:-0.27498em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-2.42502em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="mord mtight"><span class="mord mathnormal mtight">s</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6828285714285715em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">′</span></span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">a</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.27498em;"><span></span></span></span></span></span></span></span></span></span> 已知，这就变成了一个动态规划问题。但在很多问题中，我们并不知道这两个函数，所以不能直接通过贝尔曼方程来求解。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/Renovamen/what-if/edit/master/notes/ai/rl/basic/bellman-equations.md" target="_blank" rel="noopener noreferrer"><svg aria-hidden="true" width="19.2" height="19.2" viewBox="-43.52 -43.52 599.04 599.04" fill="currentColor" class="ov-icon" style="font-size:1.2em;"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg> <p>Edit this page on Github</p></a></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">8/4/2021, 9:29:02 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/ai/rl/basic/mdp.html" class="prev">
        马尔科夫决策过程
      </a></span> <span class="next"><a href="/ai/rl/basic/dp.html">
        基于模型的动态规划
      </a>
      →
    </span></p></div> </main> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.b00c0d9a.js" defer></script><script src="/assets/js/4.609d7940.js" defer></script><script src="/assets/js/1.afad3575.js" defer></script><script src="/assets/js/2.c3e2e749.js" defer></script><script src="/assets/js/7.116d18a7.js" defer></script>
  </body>
</html>
